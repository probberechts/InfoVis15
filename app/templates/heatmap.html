{% extends "base.html" %}


{% block js %}
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <style>
        #map { width: 600px; height: 300px; }
        body { font: 16px/1.4 "Helvetica Neue", Arial, sans-serif; }
        .ghbtns { position: relative; top: 4px; margin-left: 5px; }
        a { color: #0077ff; }
    </style>
{% endblock %}


{% block main %}
<div id="map"></div>

<!-- <script src="../node_modules/simpleheat/simpleheat.js"></script>
<script src="../src/HeatLayer.js"></script> -->

<script src="/static/js/leaflet-heat.js"></script>

<script>
var dataURL = 'http://localhost:5000/data/observaties/?soort=bruin blauwtje';

var map = L.map('map').setView([51.1, 4.2], 8);
var tiles = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  
}).addTo(map);

$.ajax({
url: dataURL,
dataType: "json",
contentType: "application/json",
success: function(d) {
  var data_points = new Array();

for (var key in d) {
    data_points.push([d[key].lat, d[key].lon]);
}

  var heat = L.heatLayer(data_points).addTo(map);
}});
</script>
{% endblock %}
